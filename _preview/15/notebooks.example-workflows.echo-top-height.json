{"version":2,"kind":"Notebook","sha256":"187dd29fc7ece5b19a1e6afcd04be12abeaac2344cde3cd5c59de4d630707560","slug":"notebooks.example-workflows.echo-top-height","location":"/notebooks/example-workflows/echo_top_height.ipynb","dependencies":[],"frontmatter":{"title":"Echo top height calculation from NEXRAD PPI volume data:","content_includes_title":false,"kernelspec":{"name":"python3","display_name":"Python 3 (ipykernel)","language":"python"},"authors":[{"nameParsed":{"literal":"Max Grover","given":"Max","family":"Grover"},"name":"Max Grover","id":"contributors-myst-generated-uid-0"},{"nameParsed":{"literal":"Zachary Sherman","given":"Zachary","family":"Sherman"},"name":"Zachary Sherman","id":"contributors-myst-generated-uid-1"},{"nameParsed":{"literal":"Milind Sharma","given":"Milind","family":"Sharma"},"name":"Milind Sharma","id":"contributors-myst-generated-uid-2"}],"open_access":true,"license":{"content":{"id":"Apache-2.0","url":"https://opensource.org/licenses/Apache-2.0","name":"Apache License 2.0","free":true,"osi":true},"code":{"id":"CC-BY-4.0","url":"https://creativecommons.org/licenses/by/4.0/","name":"Creative Commons Attribution 4.0 International","free":true,"CC":true}},"github":"https://github.com/projectpythia/radar-cookbook","copyright":"2024","affiliations":[{"id":"University at Albany (State University of New York)","name":"University at Albany (State University of New York)"},{"id":"UCAR/NCAR","name":"UCAR/NCAR"}],"abbreviations":{"ARM":"Atmospheric Radiation Measurement"},"numbering":{"title":{"offset":1}},"edit_url":"https://github.com/projectpythia/radar-cookbook/blob/HEAD/notebooks/example-workflows/echo_top_height.ipynb","exports":[{"format":"ipynb","filename":"echo_top_height.ipynb","url":"/radar-cookbook/build/echo_top_height-0094263c7c77cfbe1278bf672928ad03.ipynb"}]},"widgets":{},"mdast":{"type":"root","children":[{"type":"block","kind":"notebook-content","data":{"tags":[]},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"An echo top is the radar indicated top of an area of precipitation. This notebook demonstrates how to calculate the echo top height (ETH) in a NEXRAD PPI volume scan to determine the maximum elevation angle at which a certain reflectivity threshold is exceeded.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"OEtEihIncD"}],"key":"QOI6G2qtYA"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"This example uses the echo top height (ETH) calculation code written by ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"zNVmDYykOs"},{"type":"link","url":"https://github.com/vlouf","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Valentin Louf","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"ku9yCzTiUX"}],"urlSource":"https://github.com/vlouf","error":true,"key":"tahqrFLXM6"},{"type":"text","value":", available at this ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"xSsvjJ0pjG"},{"type":"link","url":"https://github.com/vlouf/eth_radar.git","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"github repository","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"yynXK01diW"}],"urlSource":"https://github.com/vlouf/eth_radar.git","error":true,"key":"BaWGWAYiuE"},{"type":"text","value":".","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"GgmJ9Q3TpE"}],"key":"EH9qRICCQ9"}],"visibility":"show","key":"CphkdSYaai"},{"type":"block","kind":"notebook-content","children":[{"type":"thematicBreak","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"GxEyd9Ib8Q"}],"key":"pEcLpaWYZ7"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Overview","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"UzbjKHEuSy"}],"identifier":"overview","label":"Overview","html_id":"overview","implicit":true,"key":"iBinZzXIIc"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"The notebook applies the modified ETH algorithm proposed by ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"hZtGBwfVEW"},{"type":"link","url":"https://journals.ametsoc.org/view/journals/wefo/28/2/waf-d-12-00084_1.xml","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Lakshmanan et al. (2013)","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"ydM8FF627r"}],"urlSource":"https://journals.ametsoc.org/view/journals/wefo/28/2/waf-d-12-00084_1.xml","key":"slD4i9DV0U"},{"type":"text","value":" to a NEXRAD PPI volume scan.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"w7EFYYwvKK"}],"key":"lpsIOVBRWo"},{"type":"paragraph","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"The modified algorithm comprises these steps:","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"kbI6U9BfMR"}],"key":"jCg43t1Mj5"},{"type":"list","ordered":true,"start":1,"spread":false,"position":{"start":{"line":7,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":7,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"text","value":"Find the maximum elevation angle (","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"kTLKC94Ns1"},{"type":"inlineMath","value":"\\theta_{b}","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>θ</mi><mi>b</mi></msub></mrow><annotation encoding=\"application/x-tex\">\\theta_{b}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8444em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">θ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3361em;\"><span style=\"top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">b</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span>","key":"NLl8RrWIUi"},{"type":"text","value":") where reflectivity (","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"g1T717QBvT"},{"type":"inlineMath","value":"Z_{b}","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>Z</mi><mi>b</mi></msub></mrow><annotation encoding=\"application/x-tex\">Z_{b}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">Z</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3361em;\"><span style=\"top:-2.55em;margin-left:-0.0715em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">b</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span>","key":"o8IogmnQSE"},{"type":"text","value":") exceeds the echo-top reflectivity threshold.\nIf ","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"mQldahrTqC"},{"type":"inlineMath","value":"\\theta_{b}","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>θ</mi><mi>b</mi></msub></mrow><annotation encoding=\"application/x-tex\">\\theta_{b}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8444em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">θ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3361em;\"><span style=\"top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">b</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span>","key":"x9fvQ2pBf9"},{"type":"text","value":" is not the highest elevation scan in the virtual volume, obtain the reflectivity value (","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"TagDQSNJYs"},{"type":"inlineMath","value":"Z_{a}","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>Z</mi><mi>a</mi></msub></mrow><annotation encoding=\"application/x-tex\">Z_{a}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">Z</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:-0.0715em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">a</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span>","key":"kWZASsmfT8"},{"type":"text","value":") at the next higher elevation angle (","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"zjToNgkcfd"},{"type":"inlineMath","value":"\\theta_{a}","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>θ</mi><mi>a</mi></msub></mrow><annotation encoding=\"application/x-tex\">\\theta_{a}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8444em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">θ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">a</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span>","key":"Audg1xoBuH"},{"type":"text","value":"). Then, the echo-top height is given by the height of the radar beam at an elevation angle:","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"UpxfBPLzTH"}],"key":"NbXcaqg9iT"}],"key":"mHqmLzIUyD"},{"type":"math","value":"\\theta_T = (Z_T - Z_a) \\frac{\\theta_b - \\theta_a}{Z_b - Z_a} + \\theta_b","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"html":"<span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><msub><mi>θ</mi><mi>T</mi></msub><mo>=</mo><mo stretchy=\"false\">(</mo><msub><mi>Z</mi><mi>T</mi></msub><mo>−</mo><msub><mi>Z</mi><mi>a</mi></msub><mo stretchy=\"false\">)</mo><mfrac><mrow><msub><mi>θ</mi><mi>b</mi></msub><mo>−</mo><msub><mi>θ</mi><mi>a</mi></msub></mrow><mrow><msub><mi>Z</mi><mi>b</mi></msub><mo>−</mo><msub><mi>Z</mi><mi>a</mi></msub></mrow></mfrac><mo>+</mo><msub><mi>θ</mi><mi>b</mi></msub></mrow><annotation encoding=\"application/x-tex\">\\theta_T = (Z_T - Z_a) \\frac{\\theta_b - \\theta_a}{Z_b - Z_a} + \\theta_b</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8444em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">θ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3283em;\"><span style=\"top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.13889em;\">T</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">Z</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3283em;\"><span style=\"top:-2.55em;margin-left:-0.0715em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.13889em;\">T</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:2.2074em;vertical-align:-0.836em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">Z</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:-0.0715em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">a</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">)</span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.3714em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">Z</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3361em;\"><span style=\"top:-2.55em;margin-left:-0.0715em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">b</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">Z</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:-0.0715em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">a</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">θ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3361em;\"><span style=\"top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">b</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">θ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">a</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.836em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8444em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">θ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3361em;\"><span style=\"top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">b</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span></span>","enumerator":"1","key":"hC9mCpmN7y"},{"type":"paragraph","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"text","value":"where ","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"eZ13ThMwJF"},{"type":"inlineMath","value":"Z_T","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>Z</mi><mi>T</mi></msub></mrow><annotation encoding=\"application/x-tex\">Z_T</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">Z</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3283em;\"><span style=\"top:-2.55em;margin-left:-0.0715em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.13889em;\">T</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span>","key":"ybN5LV6fDn"},{"type":"text","value":" is the threshold value (e.g., 0 dBZ, 18 dBZ) used to compute the echo top.","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"DZl4ChwnXO"}],"key":"oml6E3Mk3O"},{"type":"list","ordered":true,"start":2,"spread":false,"position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"text","value":"If ","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"key":"z7gezRZyUX"},{"type":"inlineMath","value":"\\theta_{b}","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>θ</mi><mi>b</mi></msub></mrow><annotation encoding=\"application/x-tex\">\\theta_{b}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8444em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">θ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3361em;\"><span style=\"top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">b</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span>","key":"RphTOLK6CQ"},{"type":"text","value":" is the highest elevation scan available, set ","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"key":"nCSdzhtiQY"},{"type":"inlineMath","value":"\\theta_{T} = \\theta_{b} + \\beta/2","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>θ</mi><mi>T</mi></msub><mo>=</mo><msub><mi>θ</mi><mi>b</mi></msub><mo>+</mo><mi>β</mi><mi mathvariant=\"normal\">/</mi><mn>2</mn></mrow><annotation encoding=\"application/x-tex\">\\theta_{T} = \\theta_{b} + \\beta/2</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8444em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">θ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3283em;\"><span style=\"top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.13889em;\">T</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8444em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">θ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3361em;\"><span style=\"top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">b</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05278em;\">β</span><span class=\"mord\">/2</span></span></span></span>","key":"IK7EbGcxbi"},{"type":"text","value":", where ","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"key":"j9c4PRgciq"},{"type":"text","value":"β","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"key":"m3fJ52gTTt"},{"type":"text","value":" is the half-power beamwidth. This condition is met far away from the radar if higher-elevation scans have shorter ranges than a base “surveillance” scan and very close to the radar if the highest-elevation scan does not sample the top of the cloud. Under these circumstances, ","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"key":"dGSSlvConn"},{"type":"inlineMath","value":"\\theta_{T}","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>θ</mi><mi>T</mi></msub></mrow><annotation encoding=\"application/x-tex\">\\theta_{T}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8444em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">θ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3283em;\"><span style=\"top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.13889em;\">T</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span>","key":"EETh76XoWR"},{"type":"text","value":" is set to be the top of the beam containing dBZ ","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"key":"tNOFAHae68"},{"type":"inlineMath","value":"\\geq Z_T","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo>≥</mo><msub><mi>Z</mi><mi>T</mi></msub></mrow><annotation encoding=\"application/x-tex\">\\geq Z_T</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.7719em;vertical-align:-0.136em;\"></span><span class=\"mrel\">≥</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">Z</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3283em;\"><span style=\"top:-2.55em;margin-left:-0.0715em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.13889em;\">T</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span>","key":"gSAqlrhxIJ"},{"type":"text","value":"; that is, the traditional echo-top algorithm is followed when there are no data available from a higher-elevation scan.","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"key":"bFyA5Sh8j6"}],"key":"WSKz2kg0cR"}],"key":"xdJ7l7nM3l"}],"key":"WNl1Jfsou0"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Prerequisites","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"xJbQ2MTtvw"}],"identifier":"prerequisites","label":"Prerequisites","html_id":"prerequisites","implicit":true,"key":"tpifv0zull"},{"type":"table","position":{"start":{"line":3,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"tableRow","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"tableCell","header":true,"position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Concepts","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"U1RM9ZBCYx"}],"key":"j9XfH2z0f6"},{"type":"tableCell","header":true,"position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Importance","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"WxEZDVJd84"}],"key":"V4GWnVZVCh"},{"type":"tableCell","header":true,"position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Notes","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"iZaOAcE8KT"}],"key":"qWtXoJhBHF"}],"key":"IEpUfFgvQn"},{"type":"tableRow","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"tableCell","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"link","url":"https://foundations.projectpythia.org/core/matplotlib/matplotlib-basics.html","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"Matplotlib Basics","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"cXW0ApqACz"}],"urlSource":"https://foundations.projectpythia.org/core/matplotlib/matplotlib-basics.html","key":"XaP7u3E0Gi"}],"key":"QkTNWA84vW"},{"type":"tableCell","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"Required","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"hlwjcF18gW"}],"key":"Y8KSBAVMVt"},{"type":"tableCell","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"Basic plotting","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"Xl9Z61uYED"}],"key":"YnworIXby6"}],"key":"kjfSDd4DMa"},{"type":"tableRow","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"tableCell","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"link","url":"https://foundations.projectpythia.org/core/cartopy/cartopy.html","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"Intro to Cartopy","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"HbwudiesGb"}],"urlSource":"https://foundations.projectpythia.org/core/cartopy/cartopy.html","key":"YDeNKymTP4"}],"key":"pAeLDsStbc"},{"type":"tableCell","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"Required","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"VhNS2bqD7X"}],"key":"MdwDVJRorf"},{"type":"tableCell","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"Geospatial plotting","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"FgULxIY4Dn"}],"key":"wbEQKW3BXG"}],"key":"A1gYe7o3Gj"},{"type":"tableRow","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"tableCell","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"link","url":"/notebooks/foundations/pyart-basics","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"Py-ART Basics","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"OEPKMtJXEW"}],"urlSource":"../foundations/pyart-basics","dataUrl":"/notebooks.foundations.pyart-basics.json","internal":true,"protocol":"file","key":"EWbmjaLKxj"}],"key":"qYqWmpTRed"},{"type":"tableCell","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"Required","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"Ksa4cXtCvn"}],"key":"XCTIVswThB"},{"type":"tableCell","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"IO/Visualization","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"onGm9MAVM7"}],"key":"KXe6PUUz58"}],"key":"kFv0c77hT2"},{"type":"tableRow","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"tableCell","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"link","url":"https://numba.pydata.org/","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"text","value":"Numba","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"BIaHMYTXa1"}],"urlSource":"https://numba.pydata.org/","key":"dsgHT4c9CT"}],"key":"tmcidivISs"},{"type":"tableCell","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"text","value":"Helpful","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"LPtuXwwcn3"}],"key":"z9DemFmbDW"},{"type":"tableCell","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"text","value":"Familiarity with vectorization/optimization of Python functions","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"ZMAg9vEcQO"}],"key":"vZTgYZHcsr"}],"key":"zsExfbeDIk"}],"key":"vxjKj25vga"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"strong","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"text","value":"Time to learn","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"cjS7VaAIB3"}],"key":"HfM6wiQcnU"},{"type":"text","value":": 25 minutes","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"sZVjOyWTea"}],"key":"J2vqDYNH4J"}],"key":"y6ZwCiR4ic"}],"key":"EZU2UM60Zo"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Imports","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"Bkyy4nogya"}],"identifier":"imports","label":"Imports","html_id":"imports","implicit":true,"key":"RSvRncrvls"}],"key":"azrmtHUsVu"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"import pyart\nimport numpy as np\nfrom echotop import cloud_top_height, grid_cloud_top\nimport matplotlib.pyplot as plt\nimport cartopy.crs as ccrs","visibility":"show","key":"P45t7WjW9a"},{"type":"output","id":"Wlh7FZLsvld5ewT-_SeIV","data":[{"output_type":"stream","name":"stdout","text":"\n## You are using the Python ARM Radar Toolkit (Py-ART), an open source\n## library for working with weather radar data. Py-ART is partly\n## supported by the U.S. Department of Energy as part of the Atmospheric\n## Radiation Measurement (ARM) Climate Research Facility, an Office of\n## Science user facility.\n##\n## If you use this software to prepare a publication, please cite:\n##\n##     JJ Helmus and SM Collis, JORS 2016, doi: 10.5334/jors.119\n\n"}],"visibility":"show","key":"gi180dwGuH"}],"visibility":"show","key":"MMc23Gv0D8"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Define our function to compute ETH on a uniform x-y grid","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"UFtxQCjPav"}],"identifier":"define-our-function-to-compute-eth-on-a-uniform-x-y-grid","label":"Define our function to compute ETH on a uniform x-y grid","html_id":"define-our-function-to-compute-eth-on-a-uniform-x-y-grid","implicit":true,"key":"ZxuZgryPln"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"The input file can be a Next Generation Weather Radar (NEXRAD) archive file from Amazon Web Services. We will remotely access  this file and use a reflectivity threshold ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"LL5u1DxdCt"},{"type":"inlineCode","value":"eth_thld","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"UPN9Znxx23"},{"type":"text","value":" to define our echo tops.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"h6iTbT5W4n"}],"key":"M5aTxpNr1A"}],"key":"Fpgvjyz6x9"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"def compute_eth(infile, eth_thld=0):\n    \"\"\"\n    Compute the Echo Top Height on a grid\n    \n    Parameters\n    ==========\n    infile (str): Filename of NEXRAD Level 2 Archive file. The files hosted by\n    at the NOAA National Climate Data Center [1]_ as well as on the\n    UCAR THREDDS Data Server [2]_ have been tested. Other NEXRAD\n    Level 2 Archive files may or may not work. Message type 1 file\n    and message type 31 files are supported.\n    \n    eth_thld (float): Reflectivity threshold for which we want to compute \n    the echo top height.\n        \n    Returns:\n    ========\n    cth_grid: ndarray <x, y>\n        Echo top height on a grid of dimension (x, y).  \n        \n    References\n    ----------\n    .. [1] http://www.ncdc.noaa.gov/\n    .. [2] http://thredds.ucar.edu/thredds/catalog.html\n    \"\"\"\n    # Reading NEXRAD L2 data stored on AWS cloud\n    \n    radar = pyart.io.read_nexrad_archive(infile)\n\n    r = radar.range['data']\n    azimuth = radar.azimuth['data']\n    elevation = radar.elevation['data']\n    refl = np.array(radar.fields['reflectivity']['data'])\n    st_sweep = radar.sweep_start_ray_index['data']\n    ed_sweep = radar.sweep_end_ray_index['data']\n\n    # Compute ETH. The 'echotop' package uses @jit decorator to optimize \n    # the 'cloud_top_height' function\n    cth = cloud_top_height(r, azimuth, elevation, st_sweep, ed_sweep, refl, eth_thld=eth_thld)\n\n    # Grid data\n    th = 450 - azimuth[slice(st_sweep[0], ed_sweep[0] + 1)]\n    th[th < 0] += 360\n\n    R, A = np.meshgrid(r, th)\n    x = R * np.cos(np.pi * A / 180)\n    y = R * np.sin(np.pi * A / 180)\n\n    xgrid = np.arange(-MAX_RANGE, MAX_RANGE + RANGE_STEP / 2, RANGE_STEP).astype(np.int32)\n    [X, Y] = np.meshgrid(xgrid, xgrid)\n    cth_grid = grid_cloud_top(\n        cth, x, y, X, Y, nnearest=24, maxdist=2500\n    )  # nearest=24 should be enough to sample out to 2500m on a 1000m grid\n    cth_grid = np.ma.masked_invalid(cth_grid).astype(np.int32).filled(FILLVALUE)\n\n    return cth_grid","visibility":"show","key":"CVTpLMXfxa"},{"type":"output","id":"L3aAxjRMICo-jfSmfwZFd","data":[],"visibility":"show","key":"CtregTqFdQ"}],"visibility":"show","key":"ht3WQAQ4qX"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Read and plot reflectivity and velocity fields for a sample file","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"IZt9scmqKV"}],"identifier":"read-and-plot-reflectivity-and-velocity-fields-for-a-sample-file","label":"Read and plot reflectivity and velocity fields for a sample file","html_id":"read-and-plot-reflectivity-and-velocity-fields-for-a-sample-file","implicit":true,"key":"ZHs8njL5m0"}],"key":"ubfw5vXCU6"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"aws_nexrad_level2_file = (\n    \"s3://noaa-nexrad-level2/2022/03/22/KHGX/KHGX20220322_120125_V06\"\n)\n\nradar = pyart.io.read_nexrad_archive(aws_nexrad_level2_file)\n\n\nfig = plt.figure(figsize=(12, 4))\ndisplay = pyart.graph.RadarMapDisplay(radar)\n\nax = plt.subplot(121, projection=ccrs.PlateCarree())\n\ndisplay.plot_ppi_map(\n    \"reflectivity\",\n    sweep=0,\n    ax=ax,\n    colorbar_label=\"Equivalent Relectivity ($Z_{e}$) \\n (dBZ)\",\n    vmin=-20,\n    vmax=60,\n)\n\nax = plt.subplot(122, projection=ccrs.PlateCarree())\n\ndisplay.plot_ppi_map(\n    \"velocity\",\n    sweep=1,\n    ax=ax,\n    colorbar_label=\"Radial Velocity ($V_{r}$) \\n (m/s)\",\n    vmin=-70,\n    vmax=70,\n)","visibility":"show","key":"VKaLutL3DV"},{"type":"output","id":"DihpulfR3jpkbhc8oHeeG","data":[{"output_type":"display_data","metadata":{},"data":{"text/plain":{"content":"<Figure size 1200x400 with 4 Axes>","content_type":"text/plain"},"image/png":{"content_type":"image/png","hash":"9aadcadf4861fde1a1085674ed2110ec","path":"/radar-cookbook/build/9aadcadf4861fde1a1085674ed2110ec.png"}}}],"visibility":"show","key":"S0lFFBqCUL"}],"visibility":"show","key":"heHz8zFhZo"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Define some global constants and compute the ETH on a horizontally uniform grid","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"t6pi1UThuO"}],"identifier":"define-some-global-constants-and-compute-the-eth-on-a-horizontally-uniform-grid","label":"Define some global constants and compute the ETH on a horizontally uniform grid","html_id":"define-some-global-constants-and-compute-the-eth-on-a-horizontally-uniform-grid","implicit":true,"key":"vERQQZqyeS"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"These constants are required by the ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"qI5bygetzV"},{"type":"inlineCode","value":"compute_eth","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"ycWfbPkJwn"},{"type":"text","value":" function to grid the data from polar coordinates to a horizontally uniform grid. These three constants are defined as:","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"Wv43J1laNl"}],"key":"gP0fUDfVdm"},{"type":"paragraph","position":{"start":{"line":5,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"inlineCode","value":"FILLVALUE","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"wuaVSpcGVr"},{"type":"text","value":" (Value to replace missing data)","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"WSC8Gh6xDD"},{"type":"break","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"ufwnISARaH"},{"type":"inlineCode","value":"RANGE_STEP","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"BvdkbDdhsL"},{"type":"text","value":" (Uniform horizontal grid spacing in x and y dimensions)","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"xA14scEeVA"},{"type":"break","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"S599K8PDgg"},{"type":"inlineCode","value":"MAX_RANGE","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"iX6lVi7zQK"},{"type":"text","value":" (Maximum range up to which ETH to be calculated from gridded data)","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"D4SubSPgpc"}],"key":"PL3w7Dnmey"}],"key":"FlPmN8t5mS"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"FILLVALUE: int = -9999 \nRANGE_STEP: int = 1000 \nMAX_RANGE: float = 250e3 \n\ncth_grid = compute_eth(aws_nexrad_level2_file, eth_thld=20)","visibility":"show","key":"FDCXpytEkQ"},{"type":"output","id":"3ueSATLY_uvbvaB6jrgOQ","data":[],"visibility":"show","key":"oSsR9uPvkc"}],"visibility":"show","key":"vGB9MYVrPR"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Plot the gridded echo/cloud top height using matplotlib","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"bW1IKg0nEU"}],"identifier":"plot-the-gridded-echo-cloud-top-height-using-matplotlib","label":"Plot the gridded echo/cloud top height using matplotlib","html_id":"plot-the-gridded-echo-cloud-top-height-using-matplotlib","implicit":true,"key":"Y4e06MSENL"}],"key":"esGK83mpWZ"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"p = plt.pcolormesh(cth_grid,\n                   vmin=0,\n                   vmax=15000,\n                   cmap='ChaseSpectral')\n\nplt.colorbar(mappable=p)","visibility":"show","key":"Tgsb0KJY1p"},{"type":"output","id":"5bBZxdTs3AFDMqvZVS9Jn","data":[{"output_type":"display_data","metadata":{},"data":{"text/plain":{"content":"<Figure size 640x480 with 2 Axes>","content_type":"text/plain"},"image/png":{"content_type":"image/png","hash":"223a455a3954fdb0fdc2de94086a869b","path":"/radar-cookbook/build/223a455a3954fdb0fdc2de94086a869b.png"}}}],"visibility":"show","key":"MREzBcQmnS"}],"visibility":"show","key":"cPfJHS0LLE"},{"type":"block","kind":"notebook-content","children":[{"type":"thematicBreak","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"s9CNpKIoxb"}],"key":"pFhMt1dL4Y"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Summary","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"CGjFS70Mlz"}],"identifier":"summary","label":"Summary","html_id":"summary","implicit":true,"key":"MHnah4F7QQ"},{"type":"paragraph","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"Within this example, we walked through how to access ","key":"P0nVOa1bw9"},{"type":"abbreviation","title":"Atmospheric Radiation Measurement","children":[{"type":"text","value":"ARM","key":"sMBLFYHse3"}],"key":"f1Bm4AShPX"},{"type":"text","value":" data from a field campaign in Texas, plot a quick look of the RHI scan data, and grid our RHI data from native (polar) coordinates to a uniform range-height Caretsian grid.","key":"EELlVVSdiX"}],"key":"V1Z3rM5KlF"}],"key":"HbEJMmpPZT"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Resources and References","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"KyXGjwAic2"}],"identifier":"resources-and-references","label":"Resources and References","html_id":"resources-and-references","implicit":true,"key":"D95Z8C4CyB"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":2,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"link","url":"https://registry.opendata.aws/noaa-nexrad/","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"NOAA NEXRAD on AWS","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"ttJSbTxvgi"}],"urlSource":"https://registry.opendata.aws/noaa-nexrad/","key":"Uby5Amrpx2"}],"key":"ZVlyTe1yoh"},{"type":"listItem","spread":true,"position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"link","url":"https://arm-doe.github.io/pyart/examples/io/plot_nexrad_data_aws.html","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Read NEXRAD on AWS","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"zdW2lIRPfi"}],"urlSource":"https://arm-doe.github.io/pyart/examples/io/plot_nexrad_data_aws.html","key":"YYsGPetjV8"}],"key":"JHOsBLkGAr"},{"type":"listItem","spread":true,"position":{"start":{"line":4,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"Py-ART:","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"px7GmvT6QM"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"Helmus, J.J. & Collis, S.M., (2016). The Python ","key":"SScfgJvYXb"},{"type":"abbreviation","title":"Atmospheric Radiation Measurement","children":[{"type":"text","value":"ARM","key":"wTTqjRg3AV"}],"key":"bKym2c0SeJ"},{"type":"text","value":" Radar Toolkit (Py-ART), a Library for Working with Weather Radar Data in the Python Programming Language. Journal of Open Research Software. 4(1), p.e25. DOI: ","key":"qVmp5f7Y8g"},{"type":"cite","url":"http://doi.org/10.5334/jors.119","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"Helmus & Collis (2016)","key":"UeMZ83DsWb"}],"kind":"narrative","label":"Helmus_2016","identifier":"http://doi.org/10.5334/jors.119","enumerator":"1","key":"M5LOGR1U3q"}],"key":"zynI55qytW"}],"key":"u0gOpBqWPe"}],"key":"KFldYmuTWi"},{"type":"listItem","spread":true,"position":{"start":{"line":6,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"Echo-top height algorithm:","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"Dw2Hv1vJsd"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"Lakshmanan, V., Hondl, K., Potvin, C. K., & Preignitz, D. (2013). An improved method for estimating radar echo-top height. Weather and Forecasting, 28(2), 481-488. DOI: ","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"uVM6TOLjoV"},{"type":"cite","url":"https://doi.org/10.1175/WAF-D-12-00084.1","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"Lakshmanan ","key":"LU4vaOmYyV"},{"type":"emphasis","children":[{"type":"text","value":"et al.","key":"OtdyZhsPDh"}],"key":"oCcWVlO4qK"},{"type":"text","value":" (2013)","key":"NdoNeBEoKZ"}],"kind":"narrative","label":"Lakshmanan_2013","identifier":"https://doi.org/10.1175/WAF-D-12-00084.1","enumerator":"2","key":"uVxDvXPt25"}],"key":"obHk5yskAA"}],"key":"IcUz36QhQ0"}],"key":"UEViJOgBZv"}],"key":"ozFpTG0k28"}],"key":"PHTazKR3xL"}],"key":"cJ8HN6obEq"},"references":{"cite":{"order":["Helmus_2016","Lakshmanan_2013"],"data":{"Helmus_2016":{"label":"Helmus_2016","enumerator":"1","doi":"10.5334/jors.119","html":"Helmus, J. J., & Collis, S. M. (2016). The Python ARM Radar Toolkit (Py-ART), a Library for Working with Weather Radar Data in the Python Programming Language. <i>Journal of Open Research Software</i>, <i>4</i>(1), 25. <a target=\"_blank\" rel=\"noreferrer\" href=\"https://doi.org/10.5334/jors.119\">10.5334/jors.119</a>","url":"https://doi.org/10.5334/jors.119"},"Lakshmanan_2013":{"label":"Lakshmanan_2013","enumerator":"2","doi":"10.1175/waf-d-12-00084.1","html":"Lakshmanan, V., Hondl, K., Potvin, C. K., & Preignitz, D. (2013). An Improved Method for Estimating Radar Echo-Top Height. <i>Weather and Forecasting</i>, <i>28</i>(2), 481–488. <a target=\"_blank\" rel=\"noreferrer\" href=\"https://doi.org/10.1175/waf-d-12-00084.1\">10.1175/waf-d-12-00084.1</a>","url":"https://doi.org/10.1175/waf-d-12-00084.1"}}}},"footer":{"navigation":{"prev":{"title":"2D objective analysis of weather radar RHI scan: Fast Barnes Interpolation Example","url":"/notebooks/example-workflows/fastbarnes-interpolation-rhi","group":"Example Workflows"}}},"domain":"http://localhost:3000"}